#include "functions.h"
#include <stdio.h>
#include <stdbool.h>
#include <ctype.h>
#include <conio.h>
#include <stdlib.h>
///******************************************************************************************************************///
char** create_board(int clum) {
	int i;
	int j;
	char** matrix = (char**) malloc(sizeof(char*) * 7); ///*allocating array of seven pointers to char*///

	for (i = 0; i < 7; i++) {
		matrix[i] = (char*) malloc(sizeof(char) * 7); ///*for each char* we allocate an array of seven chars*///
	}

	for (j = 0; j < 7; j++)
		for (i = 0; i < 7; i++)
			matrix[j][i] = '0';

	return matrix; ///*Need to free matrix variable*///
}
///******************************************************************************************************************///

///******************************************************************************************************************///
void print_board(char** matrix) {
	int i = 0, j = 0;
	printf("  ");
	for (i = 1; i <= 7; i++)
		printf("%d ", i);
	putchar('\n');

	for (j = 0; j < 7; j++) {
		printf("%d ", j + 1);
		for (i = 0; i < 7; i++)
			printf("%c ", matrix[j][i]);

		printf("\n");
	}
}

///******************************************************************************************************************///

///******************************************************************************************************************///
bool get_coordinate(int* j, int* i, char** matrix) {
	int v, h;

	printf("\nEnter coordinates vertical= \n");
	scanf("%d", &v);
	printf("\nEnter coordinates horizontal= \n");
	scanf("%d", &h);
	if (!isdigit(v) || !isdigit(h)) {
		printf("Enter only integer coordinates please\n");

	}

	if (v < 1 || v > 7) {
		printf("Problem with vertical coordinate\n");
		return false;
	}
	if (h < 1 || h > 7) {
		printf("Problem with horizontal coordinate\n");
		return false;
	}
	if (matrix[v - 1][h - 1] != '0') {
		printf("The cell is already taken, try again\n");
		return false;
	}
	*j = v - 1;
	*i = h - 1;
	return true;
}

///******************************************************************************************************************///

///******************************************************************************************************************///
void put_X(int j, int i, char** matrix) {
	system("cls");
	matrix[j][i] = 'X';
}
///******************************************************************************************************************///

///******************************************************************************************************************///

void put_Y(int j, int i, char** matrix) {
	system("cls");
	matrix[j][i] = 'Y';
}

///******************************************************************************************************************///
int sum_X_left(int j, int i, char** matrix) {
	if (i < 0 || matrix[j][i] == 'Y' || matrix[j][i] == '0')
		return 0;
	return (1 + sum_X_left(j, i - 1, matrix));
}
///******************************************************************************************************************///

///******************************************************************************************************************///
int sum_X_right(int j, int i, char** matrix) {
	if (i > 6 || matrix[j][i] == 'Y' || matrix[j][i] == '0')
		return 0;
	return (1 + sum_X_right(j, i + 1, matrix));
}
///******************************************************************************************************************///

///******************************************************************************************************************///
int sum_X_up(int j, int i, char** matrix) {
	if (j < 0 || matrix[j][i] == 'Y' || matrix[j][i] == '0')
		return 0;
	return (1 + sum_X_up(j - 1, i, matrix));
}
///******************************************************************************************************************///

///******************************************************************************************************************///
int sum_X_down(int j, int i, char** matrix) {
	if (j > 6 || matrix[j][i] == 'Y' || matrix[j][i] == '0')
		return 0;
	return (1 + sum_X_down(j + 1, i, matrix));

}

///******************************************************************************************************************///

int sum_Y_left(int j, int i, char** matrix) {
	if (i < 0 || matrix[j][i] == 'X' || matrix[j][i] == '0')
		return 0;
	return (1 + sum_Y_left(j, i - 1, matrix));

}

///******************************************************************************************************************///

///******************************************************************************************************************///

int sum_Y_right(int j, int i, char** matrix) {
	if (i > 6 || matrix[j][i] == 'X' || matrix[j][i] == '0')
		return 0;
	return (1 + sum_Y_right(j, i + 1, matrix));

}

///******************************************************************************************************************///

///******************************************************************************************************************///

int sum_Y_up(int j, int i, char** matrix) {
	if (j < 0 || matrix[j][i] == 'X' || matrix[j][i] == '0')
		return 0;
	return (1 + sum_Y_up(j - 1, i, matrix));

}

///******************************************************************************************************************///

///******************************************************************************************************************///

int sum_Y_down(int j, int i, char** matrix) {
	if (j > 6 || matrix[j][i] == 'X' || matrix[j][i] == '0')
		return 0;
	return (1 + sum_Y_down(j + 1, i, matrix));

}
///******************************************************************************************************************///

///******************************************************************************************************************///
bool check_win(char** matrix, char c, int j, int i) {
	switch (c) {
	case 'X':
		///horizontal///
		if ((sum_X_left(j, i, matrix) + sum_X_right(j, i, matrix) - 1) >= 4) {

			printf("\n X WINS!!\n");
			return true;
		}
		if ((sum_X_up(j, i, matrix) + sum_X_down(j, i, matrix) - 1) >= 4) {
			printf("\n X WINS!!\n");
			return true;
		}
		break;
	case 'Y':
		///horizontal///
		if ((sum_Y_left(j, i, matrix) + sum_Y_right(j, i, matrix) - 1) >= 4) {
			printf("\n Y WINS!!\n");
			return true;
		}
		if ((sum_Y_up(j, i, matrix) + sum_Y_down(j, i, matrix) - 1) >= 4) {
			printf("\n Y WINS!!\n");
			return true;
		}
		break;
	default:
		return false;
	}
	return false;
}
///******************************************************************************************************************///

///******************************************************************************************************************///
bool check_tie(char** matrix) {
	int j, i, space = 0;

	for (j = 0; j < 7; j++) {
		space = 0;
		for (i = 0; i < 7; i++) {
			if (matrix[j][i] == '0')
				space++;
			else
				space = 0;
			if (space == 4)
				return false;
		}

	}
	space = 0;
	for (i = 0; i < 7; i++) {
		space = 0;
		for (j = 0; j < 7; j++) {
			if (matrix[j][i] == '0')
				space++;
			else
				space = 0;
			if (space == 4)
				return false;

		}
	}
	printf("\n DRAW! the game is over\n");
	return true;
}
///******************************************************************************************************************///

///******************************************************************************************************************///

void ask_for_move(int counter) {
	if (counter % 2 == 0) {
		printf("\nPlayer X turn\n");
		return;
	}
	printf("\nPlayer Y turn\n");
	return;
}

///******************************************************************************************************************///

///******************************************************************************************************************///
